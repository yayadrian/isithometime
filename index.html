<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Is it home time</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
<style type="text/css">@import "jquery.countdown.css";</style> 
<script type="text/javascript" src="jquery.countdown.js"></script>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>Is it home time yet?</title>
	
<script type="text/javascript">
//big yes no
var d = new Date();
var year = d.getFullYear();
var month = d.getMonth();
var realMonth = d.getMonth() + 1; //getMonth starts at 0
var day = d.getDate();
var hour = d.getHours();
var minute = d.getMinutes();

if (!hometime) {
	var hometime = new Date(year, month, day, 17, 30);
}

var worktime = new Date(year, month, day, 23, 59);

function load() {
	setHomeTime();
	//set the count down timer
	$(function () {
		$('#messagediv').countdown({until: hometime, onExpiry: hideCounter, format: 'HMS'});
	});
	zeroTime();
		
}

function isittime() {
	if (d > hometime && d < worktime) {
		return true;
	} else {
		return false;
	}	
}

function setHomeTime() {
	if (isittime()){ //yep its home time
		document.getElementById('noHomeTime').style.display='none'
		document.getElementById('yesHomeTime').style.display='block'
		document.title = "Yes - it's home time"
		document.getElementById("isit").innerText = "Yes"
		document.getElementById("isit").innerHTML = "Yes"
	} else {
		document.getElementById('yesHomeTime').style.display='none'
		document.getElementById('noHomeTime').style.display='block'
		document.title = "No - it's not home time for you"
		document.getElementById("isit").innerText = "No"
		document.getElementById("isit").innerHTML = "No"

	}
}

function setTime() {
	if (document.getElementById('presentOrFuture').value == "tomorrow"){
		day = d.getDate()+1;
	} else {
		day = d.getDate();
	}
	
	hometime = new Date(year, month, day, document.getElementById('hours').value, document.getElementById('minutes').value)
	setHomeTime();
	//set the count down timer
	$(function () {
		$('#messagediv').countdown('change',{until: hometime, format: 'HMS'});
	});	
	zeroTime();
}

function hideCounter() {
	document.getElementById('messagediv').style.display = 'none'
}

function showCounter() {
	document.getElementById('messagediv').style.display = 'block'
}

function zeroTime() {
// if the counter is at 0 0 0 
	if ($('#messagediv').countdown('getTimes')[6] == 0 && $('#messagediv').countdown('getTimes')[5] == 0 && $('#messagediv').countdown('getTimes')[4] == 0) {
		hideCounter();
	}	else {
		showCounter();
	}	
}

</script>
<link rel="stylesheet" href="style.css" type="text/css" />		
</head>

<body onload="load()">

	<div id="topbar">
	<form>
		<select id="hours">
		  <option value="00">12 am</option>			
		  <option value="01">1 AM</option>
		  <option value="02">2 AM</option>
		  <option value="03">3 AM</option>
		  <option value="04">4 AM</option>
		  <option value="05">5 AM</option>
		  <option value="06">6 AM</option>
		  <option value="07">7 AM</option>
		  <option value="08">8 AM</option>
		  <option value="09">9 AM</option>
		  <option value="10">10 AM</option>
		  <option value="11">11 AM</option>
		  <option value="12">12 PM</option>
		  <option value="13">1 PM</option>
		  <option value="14">2 PM</option>
		  <option value="15">3 PM</option>
		  <option value="16">4 PM</option>
		  <option value="17">5 PM</option>
		  <option value="18">6 PM</option>
		  <option value="19">7 PM</option>
		  <option value="20">8 PM</option>
		  <option value="21">9 PM</option>
		  <option value="22">10 PM</option>
		  <option value="23">11 PM</option>
		  <option value="00">12 am</option>
		</select>
		
		<select id="minutes">
		  <option value="00">00</option>			
		  <option value="15">15</option>
		  <option value="30">30</option>
		  <option value="45">45</option>		  		  
		</select>
		
		<select id="presentOrFuture">
			<option value="today">today</option>
			<option value="tomorrow">tomorrow</option>
		</select>
		
		<input type="submit" value="Set time" onclick="setTime();return false;"/>
	</form>	
					
	</div>

<div id="horizon">
<div id="wrapper">
	<div id="yesno">
		<h1 id="isit">Is itÂ¿</h1>
	</div>

<div id="cuteMessage">
	
	<div id="noHomeTime" >
		No its not home time
	</div>
	
	<div id="yesHomeTime">
		It's Home Time get going
	</div>

	<div id="messagediv">
	</div>	
</div>
	
</div>
</div>
	
</body>
</html>
